
## AOP 概念
AOP 是 Aspect-Oriented programming 的缩写，中文翻译为面向切面编程，它和 OOP 一样是一种编程思想。

AOP 把软件系统分为两个部分：`核心关注点` 和 `横切关注点`。业务处理的主要流程是核心关注点，与之关系不大的部分是横切关注点。 
横切关注点的一个特点是，他们经常发生在核心关注点的多处，而各处都基本相似。
比如权限认证、日志、事务处理。AOP 的作用在于分离系统中的各种关注点，将核心关注点和横切关注点分离开来。
通俗的讲就是将应用程序中的业务逻辑同对其提供支持的通用服务进行分离，AOP 可以说是 OOP 的补充和完善。

## 实现原理
`代理模式`和 `装饰者模式` 都是常用的 Java 设计模式，它的特征是代理类与委托类有同样的接口，
代理类主要负责为委托类预处理消息、过滤消息、把消息转发给委托类，以及事后处理消息等。
代理类与委托类之间通常会存在关联关系，一个代理类的对象与一个委托类的对象关联，代理类的对象本身并不真正实现服务，而是通过调用委托类的对象的相关方法，来提供特定的服务。

两种模式最主要的区别是：
代理模式中，代理类对被代理的对象有控制权，决定其执行或者不执行。
而装饰模式中，装饰类对代理对象没有控制权，只能为其增加一层装饰，以加强被装饰对象的功能。

所以，在使用 AOP 对方法进行权限校验时，会影响真实对象是否执行，可以理解为是通过代理模式实现的；
在使用 AOP 对方法进行日志追踪时，不会影响真实对象的执行，可以理解为是通过装饰者模式实现的。

## AOP 的具体实现
上面有讲过，切面织入的方式有3种，分别是：
- 运行时织入（Runtime wearing）：是指采用 jdk代理 或 cglib 工具进行切面的织入。
- 编译期织入（Compile time wearing）：是指在 Java 编译期，采用特殊的编译器，将切面织入到 Java 类中。
- 类加载期织入（Classload time wearing）：是指通过特殊的类加载器，在类字节码加载到 JVM 时织入切面。

我们最常用的 Spring AOP 是采用运行时织入（Runtime wearing），它是基于动态代理的实现的。
如果需要代理的对象，实现了某个接口，那么 Spring AOP 会使用 jdk代理 去创建代理对象，而对于没有实现接口的对象，Spring AOP 会使用 cglib 生成一个被代理对象的子类。