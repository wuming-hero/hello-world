## 核心原则总结
以领域模型为中心：代码结构反映业务逻辑。
明确边界：通过限界上下文隔离不同业务域。
高内聚低耦合：聚合内强一致性，聚合间松散协作。
分层架构：分离领域层、应用层、基础设施层。

## 适用场景
* 业务复杂度高：需要深度理解业务规则（如金融、电商）。
* 长生命周期系统：模型可随业务演进，避免代码腐化。
* 多团队协作：通过限界上下文明确团队职责边界。

## 领域模型
2. 领域模型
领域模型是需求分析的自然结果。

2. 统一语言
任何在需求描述中出现的概念，都必须出现在领域模型中。如果需求描述中存在概念之间的关系，领域模型中也必须有这个关系。

3. 探索和发现
沟通过程也是探索和发现的过程。通过讨论，特别是通过显式化领域模型，常常能发现模糊的需求，或者新需求的线索，或者需要精确定义的术语。

## 领域设计基本模块
实体、值对象、领域服务、领域事件

### 1. 实体(Entities)
特征：具有唯一标识（ID），状态可变。
示例：User（用户ID唯一，属性可修改）。

### 2. 值对象(Value Objects)
特征：无唯一标识，通过属性值定义，不可变。
示例：Money（由金额和货币类型组成，不可修改）。

### 3. 领域服务(services)
作用：封装跨聚合或无状态的业务逻辑。
示例：TransferService 处理跨账户转账（涉及 Account 聚合）。

### 4. 领域事件(Domain Events)
定义：记录领域中发生的重要业务动作，用于驱动后续行为。

特征：
命名采用过去时（如 OrderPaid）。
包含事件发生的时间、触发者及关键数据。

作用：实现事件驱动架构（EDA）或事件溯源（Event Sourcing）。

### 5. 聚合(Aggregates)
定义：一组相关对象的集合，聚合根（Aggregate Root） 是唯一外部访问入口。

规则：
聚合内保证强一致性。
聚合间通过ID引用，不直接持有对象。

示例：Order（聚合根）包含 OrderItem 值对象列表。

* 将实体和值对象划分为聚合并围绕着聚合定义边界。
* 作为一个整体来定义聚合的属性和不变量，并把其执行责任赋予聚合根或指定的框架机制。
* 选择一个实体作为每个聚合的根，并仅允许外部对象持有对聚合根的引用。

在领域驱动设计中：聚合提升了面向对象系统的象粒度，保证了业务完整性
从生命周期角度：在满足生命周期一致的前提下，应该划分为尽量小的聚合

#### 聚合的划分的生命周期一致性原则
生命周期一致性是指聚合边界内的对象，和聚合根之间存在"人身依附"关系。，即：如果聚合根消失，则聚合内的其他元素都应该同时消息。

#### 聚合的划分的小聚合原则
* 在不破坏业务逻辑完整性的基础上，小聚合带来更大的灵活性

### 6. 仓储（Repository）
职责：管理聚合的持久化和检索，屏蔽底层数据存储细节。

规则：
每个聚合根对应一个仓储。
仅通过聚合根进行数据操作。

### 7. 工厂（Factory）
用途：封装复杂对象的创建逻辑。
类型：
领域对象工厂：创建聚合或值对象（如 OrderFactory）。
抽象工厂：创建复杂依赖结构。

### 8. 模块（Module）
作用：组织领域模型的代码结构，按业务概念分类。
示例：将 Order、OrderItem、OrderService 放入 order 模块。

