## 查看系统指标
TOP 命令
```bash
top - 11:25:20 up 103 days, 17:11,  0 users,  load average: 0.44, 0.39, 0.39
Tasks:  32 total,   1 running,  31 sleeping,   0 stopped,   0 zombie
%Cpu(s):  4.4 us,  4.6 sy,  0.0 ni, 90.6 id,  0.0 wa,  0.0 hi,  0.0 si,  0.4 st
KiB Mem :  8388608 total,   876540 free,  6015716 used,  1496352 buff/cache
KiB Swap:        0 total,        0 free,        0 used.  1934604 avail Mem 

   PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                                                                                                                                                    
  5587 admin     20   0 1534296  76100  52016 S  12.0  0.9   2:09.03 ilogtail                                                                                                                                                   
  9316 admin     20   0 9977684   5.2g  16972 S  10.0 65.3  16478:40 java                                                                                                                                                       
 11122 root      20   0  276348 106280  41716 S   1.7  1.3   1773:01 atp-daemon                                                                                                                                                 
211694 root      20   0 1681300  69868  20784 S   1.3  0.8 279:30.52 ilogtail                                                                                                                                                   
  4315 root      39  19 2758516  23472   6576 S   1.0  0.3   1367:17 argusagent                                                                                                                                                 
  1695 admin     20   0 4034900 242428   4536 S   0.7  2.9 961:01.59 java                                                                                                                                                       
103664 root      20   0 2863000  28664  17196 S   0.7  0.3 796:12.12 staragentd                                                                                                                                                 
     1 root      20   0   11212   1040    396 S   0.3  0.0 247:44.22 light                                                                                                                                                      
  5520 root      20   0    8540    340     24 S   0.3  0.0 393:09.01 .start                                                                                                                                                     
 58383 root      20   0 1585288  40472  19976 S   0.3  0.5  96:40.38 uniagent                                                                                                                                                   
   148 root      20   0  103964   6344   5376 S   0.0  0.1   0:00.00 sshd                                                                                                                                                       
   149 root      20   0   20648   2944   2172 S   0.0  0.0   2:39.53 crond                                                                                                                                                      
  1940 admin     20   0 1233684   6300   3364 S   0.0  0.1  12:57.82 oneman                                                                                                                                                     
  5332 root      20   0 1079016  29172   9456 S   0.0  0.3  31:46.07 metricbeat                                                                                                                                                 
  5712 root      20   0   46488  11320   3544 S   0.0  0.1 153:05.55 rasp-daemon                                                                                                                                                
 10945 admin     20   0  112580    908    780 S   0.0  0.0   0:08.31 tail                                                                                                                                                       
 14309 root      20   0   51632   4316   1072 S   0.0  0.1   0:00.00 tengine                                                                                                                                                    
 14311 admin     20   0    4376   1156   1052 S   0.0  0.0   0:06.77 cronolog                                                                                                                                                   
 14313 admin     20   0    4372   1148   1048 S   0.0  0.0   1:43.91 cronolog                                                                                                                                                   
 14314 admin     20   0    4248    736    656 S   0.0  0.0   0:00.00 cronolog                                                                                                                                                   
 14315 admin     20   0   51632   4908   1664 S   0.0  0.1   0:00.00 tengine                                                                                                                                                    
 14317 admin     20   0   68016  15272   2532 S   0.0  0.2  32:55.41 tengine                                                                                                                                                    
 14318 admin     20   0   68016  15400   2532 S   0.0  0.2  33:09.65 tengine                                                                                                                                                    
 14319 admin     20   0   68016  15464   2724 S   0.0  0.2  33:13.85 tengine                                                                                                                                                    
 14320 admin     20   0   68016  15412   2660 S   0.0  0.2  32:44.42 tengine                                                                                                                                                    
 18599 admin     20   0  549252   4828   4192 R   0.0  0.1   0:00.05 top                                                                                                                                                        
187712 root      20   0  610480  13700   3448 S   0.0  0.2   4:21.89 supervisord                                                                                                                                                
188017 root      20   0  671328  22152  18124 S   0.0  0.3  31:14.96 zagent                                                                                                                                                     
209988 root      20   0  239708   6420   4852 S   0.0  0.1  60:28.98 syslog-ng                                                                                                                                                  
209996 root      20   0   53636  16556  13952 S   0.0  0.2 139:38.40 systemd-journal                                                                                                                                            
211693 root      20   0  482036   7608   2068 S   0.0  0.1   0:00.00 ilogtail                  
```
## CPU指标含义
```java
* 第一行：当前时间、系统启动时间、当前系统登录用户数目、平均负载（1分钟,10分钟,15分钟），平均负载（load average）,一般对于单个cpu来说，负载在0～1.00之间是正常的，超过1.00须引起注意，在cpu中，系统平均负载不应该高于cpu核心的总数
* 第二行： 进程总数、运行进程数、休眠进程数、终止进程数、僵死进程数
* 第三行： CPU指标
    %us用户空间占用cpu百分比；
    %sy内核空间占用cpu百分比；
    %ni用户进程空间内改变过优先级的进程占用cpu百分比；
    %id空闲cpu百分比，反映一个系统cpu的闲忙程度。越大越空闲；
    %wa等待输入输出（I/O）的cpu百分比；
    %hi指的是cpu处理硬件中断的时间；
    %si值的是cpu处理软件中断的时间；
    %st用于有虚拟cpu的情况，用来指示被虚拟机偷掉的cpu时间。
* 第五行：total总的交换空间大小；used已经使用交换空间大小；free空间交换空间大小；cached缓冲的交换空间大小
* 第六行：进程显示区
    PID 进程号
    USER 运行用户
    PR：优先级，PR(Priority)所代表的值有什么含义？它其实就是进程调度器分配给进程的时间片长度，单位是时钟个数，那么一个时钟需要多长时间呢？这跟CPU的主频以及操作系统平台有关，比如linux上一般为10ms，那么PR值为15则表示这个进程的时间片为150ms。
    NI：任务nice值
    VIRT： 进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES
    RES： 物理内存用量
    SHR： 共享内存用量
    S ：该进程的状态，其中S代表休眠状态；D代表不可中断的休眠状态；R代表运行状态；Z代表僵死状态；T代表停止或跟踪状态
    %CPU：该进程自最近一次刷新以来所占用的CPU时间和总时间的百分比
    %MEM：该进程占用的物理内存占总内存的百分比
    TIME+ ：累计cpu占用时间
    COMMAND：该进程的命令名称，如果一行显示不下，则会进行截取，内存中的进程会有一个完整的命令行
```

## 查看进程下的线程
可以通过`top -Hp pid` 来查看进程里面的哪一个线程导致CPU很高的
```bash
top - 11:28:16 up 103 days, 17:14,  0 users,  load average: 1.17, 0.59, 0.46
Threads: 572 total,   0 running, 572 sleeping,   0 stopped,   0 zombie
%Cpu(s):  2.4 us,  5.3 sy,  0.0 ni, 91.9 id,  0.0 wa,  0.0 hi,  0.0 si,  0.3 st
KiB Mem :  8388608 total,   871940 free,  6015960 used,  1500708 buff/cache
KiB Swap:        0 total,        0 free,        0 used.  1934228 avail Mem 

   PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND                                                                                                                                                     
 12108 admin     20   0 9977684   5.2g  16972 S  1.3 65.3   2247:25 java                                                                                                                                                        
 12146 admin     20   0 9977684   5.2g  16972 S  1.3 65.3   2254:48 java                                                                                                                                                        
 12345 admin     20   0 9977684   5.2g  16972 S  1.3 65.3 905:03.95 java                                                                                                                                                        
 11453 admin     20   0 9977684   5.2g  16972 S  0.7 65.3 417:08.33 java                                                                                                                                                        
  9800 admin     20   0 9977684   5.2g  16972 S  0.3 65.3 456:00.24 java                                                                                                                                                        
 10434 admin     20   0 9977684   5.2g  16972 S  0.3 65.3 458:25.31 java                                                                                                                                                        
 10819 admin     20   0 9977684   5.2g  16972 S  0.3 65.3 410:26.13 java                                                                                                                                                        
 11411 admin     20   0 9977684   5.2g  16972 S  0.3 65.3  27:45.44 java                                                                                                                                                        
 11424 admin     20   0 9977684   5.2g  16972 S  0.3 65.3 660:24.10 java                                                                                                                                                        
 11448 admin     20   0 9977684   5.2g  16972 S  0.3 65.3 269:36.55 java                                                                                                                                                        
 12421 admin     20   0 9977684   5.2g  16972 S  0.3 65.3 418:03.32 java                                                                                                                                                        
 12557 admin     20   0 9977684   5.2g  16972 S  0.3 65.3  91:20.77 java                                                                                                                                                        
 12559 admin     20   0 9977684   5.2g  16972 S  0.3 65.3 231:46.03 java                                                                                                                                                        
 13125 admin     20   0 9977684   5.2g  16972 S  0.3 65.3 465:11.61 java                                                                                                                                                        
  9316 admin     20   0 9977684   5.2g  16972 S  0.0 65.3   0:00.00 java                                                                                                                                                        
  9319 admin     20   0 9977684   5.2g  16972 S  0.0 65.3   0:08.24 java                                                                                                                                                        
  9323 admin     20   0 9977684   5.2g  16972 S  0.0 65.3  87:38.23 java                                                                                                                                                        
  9324 admin     20   0 9977684   5.2g  16972 S  0.0 65.3  87:36.18 java                                                                                                                                                        
  9325 admin     20   0 9977684   5.2g  16972 S  0.0 65.3  87:34.83 java                                                                                                                                                        
  9326 admin     20   0 9977684   5.2g  16972 S  0.0 65.3  87:37.83 java                                                                                                                                                        
  9327 admin     20   0 9977684   5.2g  16972 S  0.0 65.3  48:11.59 java                                                                                                                                                        
  9328 admin     20   0 9977684   5.2g  16972 S  0.0 65.3 413:40.09 java                                                                                                                                                        
  9329 admin     20   0 9977684   5.2g  16972 S  0.0 65.3   0:04.96 java                                                                                                                                                        
  9330 admin     20   0 9977684   5.2g  16972 S  0.0 65.3   0:05.98 java                                                                                                                                                        
  9331 admin     20   0 9977684   5.2g  16972 S  0.0 65.3   0:00.01 java                                                                                                                                                        
  9332 admin     20   0 9977684   5.2g  16972 S  0.0 65.3   0:00.00 java                                                                                                                                                        
  9646 admin     20   0 9977684   5.2g  16972 S  0.0 65.3   0:00.01 java                                                                                                                                                        
  9647 admin     20   0 9977684   5.2g  16972 S  0.0 65.3   0:06.99 java                                                                                                                                                        
  9653 admin     20   0 9977684   5.2g  16972 S  0.0 65.3   9:59.49 java                                                                                                                                                        
  9711 admin     20   0 9977684   5.2g  16972 S  0.0 65.3   0:00.17 java                                                                                                                                                        
  9712 admin     20   0 9977684   5.2g  16972 S  0.0 65.3   0:11.35 java 
```