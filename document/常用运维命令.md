# 一、从日志中查找同时包含关键词a和关键词b行

## 1.1 grep 命令


### 1.1.1 grep 命令
先用 grep 过滤出包含 关键词a 的行，再通过管道 | 传递给第二个 grep 过滤出包含 关键词b 的行。
缺点：多次管道可能影响性能（但对大多数场景足够高效）。
```bash
# grep 命令
grep "关键词a" application.log | grep "关键词b"

# grep 忽略大小写
grep -i "关键词a" application.log | grep -i "关键词b"

# GREP 统计
GREP "关键词A" application.log | GREP -C "关键词B"

# 显示匹配行前后各2行
grep -A 2 -B 2 "关键词a" logfile | grep "关键词b"
```

### 1.1.2 grep 结合正则实现更高效
```bash
# 使用正则，匹配两个关键词以任意顺序出现的行
grep -E "关键词a.*关键词b|关键词b.*关键词a" application.log

# -c 统计行数
grep -Ec "关键词a.*关键词b|关键词b.*关键词a" application.log
```

grep 命令详解 https://www.runoob.com/linux/linux-comm-grep.html


## 1.2 awk命令
awk 的 /pattern/ 语法会默认匹配整行，&& 表示逻辑与，即同时满足两个条件。
优点：单次扫描文件，性能更优，适合大文件。
```bash

# awk命令
awk '/关键词a/ && /关键词b/ {print}' application.log  

# awk 忽略大小写
awk 'tolower($0) ~ /关键词a/ && tolower($0) ~ /关键词b/' application.log

# awk 统计
awk '/关键词a/ && /关键词b/{count++} END{print count}' application.log  
```

awk命令详解
https://www.runoob.com/linux/linux-comm-awk.html?spm=ata.21736010.0.0.69757536PsPN49